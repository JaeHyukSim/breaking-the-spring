# 공지사항 만들기

## 공지사항 기능을 제공한다

### 1. 공지사항에 접근하는 이용자의 종류는 3가지가 있다

    1. 진짜 관리자
    
    2. 가짜 관리자
    
    3. 일반 사용지
    
### 2. 이용자

    진짜 관리자는 실제로 공지사항을 DB에
    
                                        쓸 수 있다
                                    
                                        수정할 수 있다
                                    
                                        삭제할 수 있다
                                        
    가짜 관리자는 쿠키를 이용하여 공지사항을 가짜로
    
                                                  쓸 수 있다
                                                 
                                                  수정할 수 있다
                                                 
                                                  삭제할 수 있다
                                                  
    사용자는 공지사항을 볼 수 있다(진짜 관리자와 가짜 관리자도 볼 수 있다)
    
### 3. 설명

    가짜 관리자란, 관리자의 기능을 체험할 수 있는 일반 사용자이다.
    
    가짜 관리자를 위해 쿠키 기술을 이용한다.
    
    가짜 관리자가 많아지면서 서버에 부담이 최대한 덜 가도록 하기 위해 CRUD 내용을 세션에 저장하지 않는다.
    
### 4. 설계 과정

    1. 가짜 관리자가 수행한 CRUD를 실제 DB에 적용하지 않고, 개인에게만 마치 DB에 적용된 것처럼 보이게 하기 위해
    
       다음 로직 중 하나를 선택하여 수행한다.
       
           1. 가짜 관리자가 요청한 delete query 수만큼 공지사항 정보를 db로 가져온다
           
              ex) 원래 가져와야 할 공지사항 리스트의 개수 10개 + delete문의 개수 25개 = 35개를 일단 select하여 가져온다
           
              그리고 쿠키를 조사하여 가져온 List 중에서 삭제되어야할 것들은 삭제한다
              
              가짜 관리자가 수행한 insert query를 조사한다 (String Parsing) - 데이터의 시간을 조사하여 최종 
              
              클라이언트에게 제공될 공지사항 리스트를 정한다.
              
           2. 가짜 관리자가 요청한 delete query를 WHERE id NOT IN (a,b,c ... ) 형태로 아예 db에서 제외한다
           
              ex) 원래 가져와야 할 공지사항 리스트의 개수 10개(where로 제외 시킨 후)를 db에서 가져온다
              
              그리고 쿠키를 조사하여 insert query를 수행하여 최종 공지사항 리스트를 정한다.

    2. 나의 선택 : 2번
    
        1. delete 개수에 의해 더 많은 데이터를 가져오도록 하지 않을 수 있다
        
        2. 구현이 보다 쉬울 것으로 예측된다
        
        3. query문의 IN이 아마 해싱으로 이루어져 성능이 괜찮을 것으로 예상된다
        
        (* IN의 동작 방식(자료구조 & 알고리즘)에 대해 공부해보자)
        
    3. 세션에 저장되는 로그인 ID의 종류
    
        1. 진짜 관리자의 ID : DB에 관리자라고 명시한다 + 실제 DB를 변경한다.
        
        2. 가짜 관리자의 ID : DB에 가짜 관리자라고 명시한다 + 실제 DB를 변경할 권한이 없다
        
        3. 일반 사용자의 ID : DB에 사용자라고 명시한다 + 실제 DB를 변경할 권한이 없다
        
    4. 가짜 관리자가 세션만료되면 쿠키도 반드시 제거해주자
    
       - 가짜 관리자가 세션만료시 쿠키들 삭제
       
       - 가짜 관리자로 첫 로그인시 쿠키들 삭제 (세션에 가짜 관리자 이름 저장하는 순간)
